# CPP-STL

关于**vector**值得记住的点有：

* 它维护的是一个**连续的线性空间**，可以**动态改变**，与c++11引入的array是固定大小空间不同。

* 正因为其是连续空间，因此其**iterator**就是**普通指针**，普通指针所具备的功能它都支持（--，++，+=，->.....）。也就是说**`vector<int>::iterator it`其实就相当于`int* it`.**

* 它所维护的成员变量如下图：

  ![vector变量成员](D:\cppLearning\figure\vector变量成员1.png)

  ![vector变量成员2](D:\cppLearning\figure\vector变量成员2.png)

  start 和 finish分别指向的是**已被使用**的空间开始和结尾，(STL遵循左闭右开)，而end_of_storage指向**整块连续空间**包括备用空间的尾端。这也就是**`size()`与`capacity()`的区别**。

* 当用`push_back()`添加新元素，若还有备用空间，直接在备用空间上**构造**元素，若没有，就需要扩充空间（**重新配置（原来的2倍），移动数据，释放原空间**）。一旦空间被重新配置，指向原来vector的迭代器全部失效了，因为原空间都被释放了。

* vector的`erase()`删除一段范围内的元素或者某个位置上的元素，需要注意的是，此函数只是删除掉所在位置的元素值，并**不释放**掉vector所占空间，因此**对capacity无影响**，`clear()`底层就是调用此函数。

* `insert()`可以在插入点上插入一个值或者从插入点开始插入n个相同的值，若备用空间不够，另开辟新空间。若够，插入逻辑分两种情况，一种是插入点剩余元素比n多，一种是比n少。（详情看书）

* ​

